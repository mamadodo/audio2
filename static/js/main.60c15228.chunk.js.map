{"version":3,"sources":["20210806_102244_222_radiohistory_ep0544.mp3","20210430_113621_533_radiohistory_ep0518.mp3","20210424_105237_279_radiohistory_ep0517.mp3","20210424_105226_180_radiohistory_ep0516.mp3","radireki_thumbnail.jpeg","AudioPlayer.jsx","App.js","index.js"],"names":["tracks","src","episode1","date","title","thumbnail","episodeImg","epiNum","duration","episode2","episode3","episode4","AudioPlayer","intervalRef","useRef","useState","trackIndex","setTrackIndex","trackSrc","musicRef","Audio","musicCurrentTime","current","currentTime","musicRate","Math","floor","console","log","isPlay","setIsPlay","timePosition","setTimePosition","speed","speedIndex","setSpeedIndex","speedNextIndex","setSpeedNextIndex","musicTime","time","toString","padStart","useEffect","play","setInterval","ended","nextTrack","pause","clearInterval","timeBarWidth","timeBarX","timeBar","onClickTogglePlay","onClickEpisode","e","currentTarget","id","length","className","onClick","width","height","alt","target","getBoundingClientRect","nativeEvent","offsetX","ref","style","playbackRate","toFixed","map","track","index","App","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.60c15228.chunk.js","sourcesContent":["export default __webpack_public_path__ + \"static/media/20210806_102244_222_radiohistory_ep0544.c5856041.mp3\";","export default __webpack_public_path__ + \"static/media/20210430_113621_533_radiohistory_ep0518.ca72e8b5.mp3\";","export default __webpack_public_path__ + \"static/media/20210424_105237_279_radiohistory_ep0517.b513b552.mp3\";","export default __webpack_public_path__ + \"static/media/20210424_105226_180_radiohistory_ep0516.8d1306e4.mp3\";","export default __webpack_public_path__ + \"static/media/radireki_thumbnail.264ebb1a.jpeg\";","import React, { useEffect, useRef, useState  } from \"react\";\n\nimport episode1 from \"./20210806_102244_222_radiohistory_ep0544.mp3\";\nimport episode2 from \"./20210430_113621_533_radiohistory_ep0518.mp3\";\nimport episode3 from \"./20210424_105237_279_radiohistory_ep0517.mp3\";\nimport episode4 from \"./20210424_105226_180_radiohistory_ep0516.mp3\";\nimport episodeImg from \"./radireki_thumbnail.jpeg\";\n\nexport const tracks = [\n  {\n    src: episode1,\n    date: \"2021.08.10\",\n    title: \"0544_イスラム教の六信五行から考える日本人にとっての「聖典」と「行動規範」\",\n    thumbnail: episodeImg,\n    epiNum: \"epi544\",\n    duration: 1247,\n  },\n  {\n    src: episode2,\n    date: \"2021.05.11\",\n    title: \"0518_中国の第2三国志。智勇兼備・音容兼美のイケメン皇族蘭陵王は不敗の名将\",\n    thumbnail: episodeImg,\n    epiNum: \"epi518\",\n    duration: 911,\n  },\n  {\n    src: episode3,\n    date: \"2021.05.07\",\n    title: \"0517_「多数決が民主主義ではない」と説いたルソーの社会契約論\",\n    thumbnail: episodeImg,\n    epiNum: \"epi517\",\n    duration: 952,\n  },\n  {\n    src: episode4,\n    date: \"2021.05.04\",\n    title: \"0516_「見えざる手」に隠されたアダム・スミスの経済へのアツい思い\",\n    thumbnail: episodeImg,\n    epiNum: \"epi516\",\n    duration: 1115,\n  }\n];\n\nexport const AudioPlayer = () => {\n  const intervalRef = useRef(null);\n\n  const [trackIndex, setTrackIndex] = useState(0);\n  const { title, date, duration, thumbnail, epiNum } = tracks[trackIndex];\n  // const trackTitle = tracks[trackIndex].title;\n  // const trackDate = tracks[trackIndex].date;\n  // const trackDuration = tracks[trackIndex].duration;\n  // const trackThumbnail = tracks[trackIndex].thumbnail;\n  // const trackEpiNo = tracks[trackIndex].epiNum;\n\n  const trackSrc = tracks[trackIndex].src;\n\n  // const musicRef = useRef(null);\n  const musicRef = useRef(new Audio(trackSrc));\n\n  const musicCurrentTime = musicRef.current.currentTime;\n  const musicRate = (Math.floor(musicCurrentTime / tracks[trackIndex].duration * 100));\n  console.log(musicRate);\n\n  const [isPlay, setIsPlay] = useState(false); // playing state\n  console.log('isPlay ' + isPlay);\n  const [timePosition, setTimePosition] = useState(0); // time position\n\n  const speed = [1.0, 1.3, 1.5, 2.0, 0.5, 0.7];\n  const [speedIndex, setSpeedIndex] = useState(0);\n  const [speedNextIndex, setSpeedNextIndex] = useState(1);\n  \n  const musicTime = (time) => {\n    let hour = (Math.floor(time / 60 / 60)).toString().padStart( 2, '0');\n    let minutes = (Math.floor((time / 60) % 60)).toString().padStart( 2, '0');\n    let sec = (Math.floor(time % 60)).toString().padStart( 2, '0');\n    let convertTime;\n    convertTime = hour + ':' + minutes + ':' + sec;\n    return convertTime;\n  }\n\n  const start = () => {\n    if (intervalRef.current !== null) {\n      return;\n    }\n    \n    intervalRef.current = setInterval(() => {\n      if (musicRef.current.ended) {\n        console.log('nextTrack実行');\n        nextTrack();\n      } else {\n      setTimePosition(musicRef.current.currentTime);\n      console.log(isPlay);\n      console.log(musicRef.current.currentTime);\n      console.log('再生トラック' + trackIndex);\n      }\n    }, [1000]);\n  };\n\n\n  useEffect(() => {\n    musicRef.current = new Audio(trackSrc);\n  }, [trackSrc]);\n\n  useEffect(() => {\n    if(isPlay) {\n      musicRef.current.play();\n      start();\n    } else {\n      musicRef.current.pause();\n      if (intervalRef.current === null) {\n        return;\n      }\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n    }\n  }, [isPlay]);\n\n  const timeBar = useRef(null);\n  let timeBarWidth;\n  let timeBarX;\n\n  // play button\n  const onClickTogglePlay = () => {\n    if (isPlay) {\n      setIsPlay(!isPlay);\n      console.log(isPlay);\n    } else {\n      setIsPlay(!isPlay);\n      console.log(isPlay);\n    }\n  }\n\n  // prev 15s\n  const onClickBack = () => {\n    console.log(\"playback\");\n    musicRef.current.currentTime -= 15;\n  }\n  \n  // next 30s\n  const onClickSkip = () => {\n    console.log(\"playskip\");\n    musicRef.current.currentTime += 30;\n  }\n\n\n  // timebar click\n  const onClickTime = (e) => {\n    timeBarWidth = e.target.getBoundingClientRect().width;\n    timeBarX = e.nativeEvent.offsetX;\n    console.log(e.target.getBoundingClientRect().width);\n    console.log(e.nativeEvent.offsetX);\n    musicRef.current.currentTime = (timeBarX / timeBarWidth * tracks[trackIndex].duration);\n  }\n\n  // speed change\n  const onClickChangeSpeed = () => {\n    if (speedIndex === speed.length - 1) {\n      setSpeedIndex(0);\n      setSpeedNextIndex(speedNextIndex + 1);\n    } else {\n      setSpeedIndex(speedIndex + 1);\n      if (speedNextIndex === speed.length - 1) {\n        setSpeedNextIndex(0);\n      } else {\n        setSpeedNextIndex(speedNextIndex + 1);\n      }\n    }\n    musicRef.current.playbackRate = speed[speedNextIndex];\n    console.log(speedIndex);\n    console.log(speedNextIndex + 'next');\n  }\n\n\n  //episode click\n  const onClickEpisode = (e) => {\n    if (isPlay) {\n      setIsPlay(false);\n      musicRef.current.pause(); //audio pause\n      if (intervalRef.current === null) {\n        return;\n      }\n      clearInterval(intervalRef.current);\n      intervalRef.current = null;\n      \n      setTrackIndex(e.currentTarget.id);\n      // musicRef.current.play(); //audio play\n      // start();\n      onClickTogglePlay();\n\n    } else {\n      setTrackIndex(e.currentTarget.id);\n    }\n  };\n\n  // next Track\n  const nextTrack = () => {\n    if(isPlay) {\n      setIsPlay(false);\n      console.log(isPlay);\n      if (trackIndex < tracks.length - 1) {\n        console.log( '再生トラック' + trackIndex);\n        setTrackIndex(trackIndex + 1);\n      } else {\n        setTrackIndex(0);\n        console.log(\"最初のトラックに戻る\");\n      }\n      setIsPlay(true);\n      console.log(\"次のトラック\" + trackIndex);\n      console.log(isPlay);\n    }\n  };\n\n  return (\n    <>\n    <div id=\"app\" className=\"app\">\n    <div id=\"audio_thumb\" onClick={onClickTogglePlay}>\n      <img className=\"ep_img\" src={thumbnail} width=\"160\" height=\"160\" alt={epiNum} />\n\n      {isPlay? \n        (\n          <i id=\"pause_ico\" className=\"material-icons\">pause_circle_outline</i>\n        ) : (\n          <i id=\"play_ico\" className=\"material-icons\">play_circle_outline</i>\n        )\n      }\n\n    </div>\n    <div id=\"audio_desc\">\n      <div className=\"ep-date\">{date}</div>\n      <div className=\"ep-title\">\n        {title}<span className=\"sp-nodisp\"></span>\n      </div>\n      <div id=\"timebar\">\n        <div id=\"timebar-bg\" onClick={onClickTime} ref={timeBar}>\n          <div id=\"timebar-past\" style={{width: musicRate + '%'}}>\n            <div id=\"timebar-num\">{musicRate + '%'}</div>\n          </div>\n        </div>\n      </div>\n      <div>\n        <span id=\"time_disp\">\n        {musicTime(timePosition)}/\n        {musicTime(duration)}\n        </span>\n        <p className=\"time_control_area\">\n          <span>\n            <img \n              id=\"playback\" \n              src=\"https://propo.fm/image/rewind.png\" \n              width=\"23\" \n              alt=\"rewind\" \n              onClick={onClickBack}\n            />\n          </span>\n          <span>\n            <img \n              id=\"skip\" \n              src=\"https://propo.fm/image/skip.png\" \n              width=\"23\" \n              alt=\"skip\"\n              onClick={onClickSkip}\n            />\n          </span>\n          <span id=\"speed_ctrl\" onClick={onClickChangeSpeed}>{speed[speedIndex].toFixed(1)}x</span>\n        </p>\n      </div>\n    </div>\n    </div>\n\n    <ul className=\"allContents-list\">\n    {tracks.map((track, index) => (\n\n    <li className=\"contentItem episodeContent\" key={track.epiNum} onClick={onClickEpisode} id={index}>\n\t\t\t\t\t\t\t<div className=\"content-inner1\">\n\t\t\t\t\t\t\t\t<div className=\"content-text\">\n\t\t\t\t\t\t\t\t\t<div className=\"content-ttl-wrap\">\n\t\t\t\t\t\t\t\t\t\t<h2 className=\"content-ttl\">\n\t\t\t\t\t\t\t\t\t\t\t{track.title}\n\t\t\t\t\t\t\t\t\t\t</h2>\n\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<div className=\"content-linkItem\">\n\t\t\t\t\t\t\t\t\t<span className=\"material-icons ico-listen\">play_circle_outline</span>\n\t\t\t\t\t\t\t\t\t<span className=\"play-text listen\">聴く</span>\n\t\t\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t<div className=\"content-inner2 content-info\">\n\t\t\t\t\t\t\t\t<span className=\"date\">{track.date}</span>\n\t\t\t\t\t\t\t\t<span> / </span>\n\t\t\t\t\t\t\t\t<span className=\"time\">{musicTime(track.duration)}</span>\n\t\t\t\t\t\t\t</div>\n      </li>\n    ))}\n    </ul>\n\n  </>\n\n  );\n}","import React from \"react\";\nimport { AudioPlayer } from \"./AudioPlayer\";\nimport \"./App.css\";\n\nexport const App = () => {\n\n  return (\n    <AudioPlayer>\n\n    </AudioPlayer>\n  );\n};\n","import ReactDOM from \"react-dom\";\n\nimport { App } from \"./App\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n"],"sourceRoot":""}